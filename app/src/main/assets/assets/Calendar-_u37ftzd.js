import{_ as C,u as F,r as g,h,c as v,i as R,a as t,t as _,F as f,g as m,o as i,n as B,m as L}from"./index-9wRN1jwx.js";import{_ as b}from"./Header-C_C7KPsn.js";import{T as x}from"./TransactionItem-CEa8c2nE.js";function I(s,a){return new Date(s,a+1,0).getDate()}function Y(s,a){return new Date(s,a,1).getDay()}function $(s){const a=new Date;return s.getDate()===a.getDate()&&s.getMonth()===a.getMonth()&&s.getFullYear()===a.getFullYear()}function z(s,a){const u=Y(s,a),o=I(s,a),d=[];for(let c=0;c<u;c++)d.push({type:"empty",day:null});for(let c=1;c<=o;c++){const y=new Date(s,a,c);d.push({type:"day",day:c,date:y,isToday:$(y)})}return d}const O={class:"page fade-in-up"},N={class:"container"},V={class:"month-selector"},E={class:"current-month"},W={class:"calendar-grid"},j={class:"weekdays"},q={class:"days"},A=["onClick"],G={class:"selected-date-section"},H={class:"section-header"},J={class:"section-title"},K={class:"glass-card"},P={key:0},Q={key:1,class:"empty-state"},U={__name:"Calendar",setup(s){const a=F(),u=g(new Date().getFullYear()),o=g(new Date().getMonth()),d=g(new Date().toISOString().split("T")[0]),c=["日","一","二","三","四","五","六"],y=h(()=>`${u.value}年 ${o.value+1}月`),k=h(()=>{const r=new Date(d.value),n=new Date;return r.getDate()===n.getDate()&&r.getMonth()===n.getMonth()&&r.getFullYear()===n.getFullYear()?"今天的记录":`${d.value} 的记录`}),w=h(()=>{const r=z(u.value,o.value),n=a.getMonthlyRecords(u.value,o.value),e=new Set(n.map(l=>l.date.split("T")[0]));return r.map(l=>{if(l.type==="day"){const p=l.date.toISOString().split("T")[0];return{...l,hasRecord:e.has(p),dateStr:p}}return l})}),D=h(()=>a.getRecordsByDate(d.value));function M(){o.value===0?(o.value=11,u.value--):o.value--}function S(){o.value===11?(o.value=0,u.value++):o.value++}function T(r){r.type==="day"&&r.dateStr&&(d.value=r.dateStr)}return(r,n)=>(i(),v("div",O,[R(b,{title:"记账日历"}),t("div",N,[t("div",V,[t("button",{class:"month-nav-btn",onClick:M},[...n[0]||(n[0]=[t("svg",{viewBox:"0 0 24 24"},[t("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})],-1)])]),t("div",E,_(y.value),1),t("button",{class:"month-nav-btn",onClick:S},[...n[1]||(n[1]=[t("svg",{viewBox:"0 0 24 24"},[t("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"})],-1)])])]),t("div",W,[t("div",j,[(i(),v(f,null,m(c,e=>t("div",{key:e,class:"weekday"},_(e),1)),64))]),t("div",q,[(i(!0),v(f,null,m(w.value,(e,l)=>(i(),v("div",{key:l,class:B(["day-cell",{empty:e.type==="empty",today:e.isToday,"has-record":e.hasRecord,selected:d.value===e.dateStr}]),onClick:p=>T(e)},_(e.day),11,A))),128))])]),t("div",G,[t("div",H,[t("div",J,_(k.value),1)]),t("div",K,[D.value.length>0?(i(),v("div",P,[(i(!0),v(f,null,m(D.value,e=>(i(),L(x,{key:e.id,record:e},null,8,["record"]))),128))])):(i(),v("div",Q,[...n[2]||(n[2]=[t("p",null,"这一天没有记录",-1)])]))])])])]))}},et=C(U,[["__scopeId","data-v-c0d938e1"]]);export{et as default};
