import{_ as A,r as S,h as g,c as o,o as n,a as e,q as j,F as f,g as k,n as q,t as y,p as I,u as z,i as L,m as T}from"./index-9wRN1jwx.js";import{_ as D}from"./Header-C_C7KPsn.js";const O={class:"pie-chart-container"},R={class:"pie-chart-svg",viewBox:"0 0 200 200"},X={key:0},Y=["d","fill","onClick","onMouseenter"],Z={x:"100",y:"95","text-anchor":"middle",class:"pie-chart-label"},G={x:"100",y:"120","text-anchor":"middle",class:"pie-chart-value"},H={class:"pie-chart-legend"},J={class:"legend-label"},K={class:"legend-value"},Q={__name:"PieChart",props:{data:{type:Array,required:!0,default:()=>[]}},setup(b){const v=b,r=S(-1),c=S(-1),_=["var(--accent-orange)","var(--accent-blue)","var(--accent-purple)","var(--accent-green)","var(--text-secondary)"],h=g(()=>v.data.reduce((s,a)=>s+a.amount,0)),$=g(()=>{if(h.value===0)return[];let s=-90;const a=80,u=100,l=100;return v.data.map((m,C)=>{const x=m.amount/h.value*360,M=s*Math.PI/180,F=(s+x)*Math.PI/180,B=u+a*Math.cos(M),P=l+a*Math.sin(M),V=u+a*Math.cos(F),w=l+a*Math.sin(F),E=x>180?1:0,N=[`M ${u} ${l}`,`L ${B} ${P}`,`A ${a} ${a} 0 ${E} 1 ${V} ${w}`,"Z"].join(" ");return s+=x,{path:N,color:_[C%_.length],data:m,index:C}})}),i=g(()=>r.value!==-1?v.data[r.value].category:c.value!==-1?v.data[c.value].category:"总支出"),t=g(()=>{const s=r.value!==-1?r.value:c.value;return s!==-1?`${(v.data[s].amount/h.value*100).toFixed(1)}%`:`¥${h.value.toFixed(2)}`}),d=g(()=>v.data.map((s,a)=>({category:s.category,percentage:(s.amount/h.value*100).toFixed(1),color:_[a%_.length]})));function p(s){r.value===s?r.value=-1:r.value=s}return(s,a)=>(n(),o("div",O,[(n(),o("svg",R,[$.value.length>0?(n(),o("g",X,[(n(!0),o(f,null,k($.value,(u,l)=>(n(),o("path",{key:l,d:u.path,fill:u.color,stroke:"var(--bg-primary)","stroke-width":"2",class:q(["pie-slice",{active:r.value===l,hovered:c.value===l}]),onClick:m=>p(l),onMouseenter:m=>c.value=l,onMouseleave:a[0]||(a[0]=m=>c.value=-1)},null,42,Y))),128))])):j("",!0),a[1]||(a[1]=e("circle",{cx:"100",cy:"100",r:"60",fill:"var(--bg-primary)"},null,-1)),e("text",Z,y(i.value),1),e("text",G,y(t.value),1)])),e("div",H,[(n(!0),o(f,null,k(d.value,(u,l)=>(n(),o("div",{key:l,class:"legend-item"},[e("div",{class:"legend-color",style:I({background:u.color})},null,4),e("span",J,y(u.category),1),e("span",K,y(u.percentage)+"%",1)]))),128))])]))}},U=A(Q,[["__scopeId","data-v-9dfe6ad6"]]),W={class:"page fade-in-up"},ee={class:"container"},te={class:"glass-card"},ae={key:1,class:"empty-state"},se={class:"glass-card",style:{"margin-top":"24px"}},ne={key:0},oe={class:"stat-bar-header"},re={class:"stat-bar-label"},ce={class:"stat-bar-value"},le={class:"stat-bar-track"},ie={key:1,class:"empty-state"},de={class:"glass-card",style:{"margin-top":"24px"}},ue={class:"tips-text"},ve={__name:"Stats",setup(b){const v=z(),r=g(()=>v.totalExpense),c=g(()=>{const i=v.expenseByCategory,t=r.value;return Object.entries(i).map(([d,p])=>({category:d,amount:p,percentage:t>0?p/t*100:0})).sort((d,p)=>p.amount-d.amount)}),_=["var(--accent-orange)","var(--accent-blue)","var(--accent-purple)","var(--accent-green)","var(--text-secondary)"];function h(i){return _[i%_.length]}const $=g(()=>{if(c.value.length===0)return"开始记录你的每一笔支出，养成良好的理财习惯！";const i=c.value[0],t=i.percentage;return t>50?`本月${i.category}支出占比最高（${t.toFixed(0)}%），建议适当控制，合理分配支出。`:t>30?`本月${i.category}支出较多（${t.toFixed(0)}%），可以尝试寻找更经济实惠的替代方案。`:"支出分布比较均衡，继续保持良好的消费习惯！"});return(i,t)=>(n(),o("div",W,[L(D,{title:"财务统计"}),e("div",ee,[e("div",te,[t[1]||(t[1]=e("div",{class:"section-header"},[e("div",{class:"section-title"},"本月支出占比")],-1)),r.value>0?(n(),T(U,{key:0,data:c.value},null,8,["data"])):(n(),o("div",ae,[...t[0]||(t[0]=[e("p",null,"本月暂无支出记录",-1)])]))]),e("div",se,[t[3]||(t[3]=e("div",{class:"section-header"},[e("div",{class:"section-title"},"本月支出详情")],-1)),r.value>0?(n(),o("div",ne,[(n(!0),o(f,null,k(c.value,(d,p)=>(n(),o("div",{key:d.category,class:"stat-bar-item"},[e("div",oe,[e("span",re,y(d.category),1),e("span",ce,"¥"+y(d.amount.toFixed(2)),1)]),e("div",le,[e("div",{class:"stat-bar-fill",style:I({width:d.percentage+"%",background:h(p)})},null,4)])]))),128))])):(n(),o("div",ie,[...t[2]||(t[2]=[e("p",null,"本月暂无支出记录",-1)])]))]),e("div",de,[t[4]||(t[4]=e("div",{class:"section-header"},[e("div",{class:"section-title"},"理财小贴士")],-1)),e("p",ue,y($.value),1)])])]))}},he=A(ve,[["__scopeId","data-v-09430768"]]);export{he as default};
